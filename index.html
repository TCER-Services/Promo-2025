<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-M36JH3H3');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Promo 2025</title>
    <meta name="description" content="Venta con la promo 2024 / 2025.">
    <meta name="keywords" content="Promo2025, promo2025">
    <meta name="author" content="Tecnología de TCER Company">
    <link rel="stylesheet" href="./Assets/css/styles.css">
    <link rel="icon" href="icono.ico" type="image/x-icon">
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M36JH3H3" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <header class="container_menu">
        <img class="menu_icono_logo" src="./Assets/img/logo_icon_menu.png" alt="Logo de promo">
        <button class="menu_hamburguesa" aria-label="Abrir menú">
            &#9776;
        </button>
        <nav class="micro_cotainer_menu">
            <a href="#Home">Home</a>
            <a href="#combos">Combos</a>
            <a href="#ubicacion">Ubícanos</a>
        </nav>
    </header>
    <main>
        <br>
        <br>
        <section class="hero" id="Home">
            <div class="hero_content">
                <h1 class="hero_title">¿Tienes <span class="naranja">hambre</span>?</h1>
                <h1 class="hero_title">¡Problema resuelto!</h1>
                <p class="hero_description">La promoción 24-25 del Politécnico ITLA en colaboración con
                    Pluyer Pollos estará vendiendo el lunes 28 de
                    Octubre del
                    2024 el día completo. ¿Quieres ahorrar tiempo? ¡Haz tu
                    pedido por aqui mismo!</p>
                <br>
                <a href="#combos" class="btn">Haz tu pedido</a>
            </div>
            <div class="hero_image">
                <img src="./Assets/img/icono_pollo.png" alt="Imagen de hero" />
            </div>
        </section>
        <br>
        <section class="combos" id="combos">
            <h1>¡Llévate tu combo ideal y disfruta de una experiencia única! Reserva ahora tu combo preferido</h1>
            <br>
            <br>

            <div class="combo-card" onclick="showForm('Combo 1')">
                <img src="./Assets/img/combo1.jpeg" alt="combo1">
                <button onclick="showForm('Combo 1')" class="btn">Haz tu pedido</button>
            </div>
            <div class="combo-card" onclick="showForm('Combo 2')">
                <img src="./Assets/img/combo2.jpeg" alt="combo2">
                <button onclick="showForm('Combo 2')" class="btn">Haz tu pedido</button>
            </div>
            <div class="combo-card" onclick="showForm('Combo 3')">
                <img src="./Assets/img/combo3.jpeg" alt="combo3">
                <button onclick="showForm('Combo 3')" class="btn">Haz tu pedido</button>
            </div>

            <section id="form-container">
                <div id="for-content">
                    <div id="notification" class="notification"></div>

                    <h2 id="form-title">Formulario para:</h2>
                    <form id="pedidoForm">
                        <input type="hidden" id="producto" name="producto">

                        <div>
                            <label for="nombre">Nombre:</label>
                            <input type="text" id="nombre" name="nombre" autocomplete="off">
                        </div>
                        <div>
                            <label for="id">Número de teléfono:</label>
                            <input type="text" id="id" name="id" autocomplete="off">
                        </div>
                        <div>
                            <label for="dirrecion">Dirección:</label>
                            <input type="text" id="dirrecion" name="dirrecion" autocomplete="off">
                        </div>
                        <div>
                            <label for="cantidad">Cantidad:</label>
                            <input type="number" id="cantidad" name="cantidad" autocomplete="off">
                        </div>
                        <div id="notification" class="notification"></div>
                        <p style="font-size: 14px;">Nota: Ingrese sus datos correctamente para asegurar su reserva.</p>
                        <button type="submit" id="enviar">Enviar Pedido</button>
                        <button type="button" id="btn-back">Regresar</button>


                    </form>
                </div>
            </section>
        </section>
        <section class="ubicacion-section" id="ubicacion">
            <h2>¿Dónde nos ubicamos?</h2>
            <p>
                Estaremos ubicados en Parque Pluyer Pollos, Prolongación
                Caracoles, Altos de Chavon, Boca Chica. de 9 de la mañana
                a 10 de la noche. ¿Qué esperas? ¡ven a visitarnos!
            </p>
        </section>
        <div>

        </div>
    </main>
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-columns">
                <div class="footer-column">
                    <img src="./Assets/img/logo_icon_menu.png" alt="logo" width="250px">
                </div>
                <div class="footer-column">
                    <h3>Redes de la promoción</h3>
                    <ul>
                        <li><a href="https://www.instagram.com/promop_25?igsh=MWE5ZjI4NzV2NHZlMw==">Instagram</a></li>
                        <li><a href="https://www.tiktok.com/@promop_25?_t=8qbGhcGTckn&_r=1">Tik Tok</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Promo 24-25. Todos los derechos reservados. Tecnología de TCER Company</p>
                <div class="links">
                    <a href="https://www.instagram.com/roadev6/">Emanuel Roa - </a>
                    <a href="https://www.instagram.com/g4bz19/">Gabriel de Jesús Reynoso Reyes</a>
                </div>
            </div>
        </div>
    </footer>
    <script>
        function showForm(comboName) {
            document.getElementById('form-title').innerText = `Formulario para: ${comboName}`;
            document.getElementById('producto').value = comboName;
            document.getElementById('form-container').style.display = 'block';
        }

        document.getElementById('btn-back').addEventListener('click', function () {
            document.getElementById('form-container').style.display = 'none';

        });

        document.getElementById('pedidoForm').addEventListener('submit', async function (event) {
            event.preventDefault();

            const nombre = document.getElementById('nombre').value
            const idInput = document.getElementById('id');
            const cantidadInput = document.getElementById('cantidad');
            const dirrecio = document.getElementById('dirrecion').value

            const cantidad = cantidadInput.value.trim();
            const id = idInput.value.trim();

            const phoneRegex = /^(809|829|849)\d{7}$/;

            if (!nombre || !id || !cantidad || !dirrecio) {
                showNotification('Por favor, completa todos los campos.', 'error');
                return;
            }

            if (cantidad < 0 || cantidad > 99 || cantidad.length > 2) {
                showNotification('Maximo de producto', 'error');
                return;
            }

            if (!phoneRegex.test(id)) {
                showNotification('Por favor, ingresa un número de teléfono válido', 'error');
                return;
            }

            const formData = new FormData(this);

            console.log('Datos a enviar:');
            for (const [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }

            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycby4Yoa5bmeaU8gYG3PG0bGm_2Iqq1BcTtzE4oFq-9mcTCf142xhRuegYF-HMA_Rojz3eQ/exec', {
                    method: 'POST',
                    body: formData,
                });

                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }

                const result = await response.json();

                showNotification(result.message, 'success');

                this.reset();
                setTimeout(() => {
                    document.getElementById('form-container').style.display = 'none';
                }, 1000);

            } catch (error) {
                console.error('Error al enviar los datos:', error);
                showNotification('Hubo un problema al enviar el pedido. Inténtalo nuevamente.', 'error');
            }
        });

        document.getElementById('cantidad').addEventListener('input', function (event) {
            const value = this.value;
            if (value.length > 2) {
                this.value = value.slice(0, 2);
            }
        });

        document.getElementById('id').addEventListener('input', function (event) {
            let value = this.value.replace(/\D/g, '');

            if (value.length > 10) {
                value = value.slice(0, 10);
            }

            this.value = value;
        });

        document.querySelector('.menu_hamburguesa').addEventListener('click', function () {
            this.classList.toggle('active');
            const menu = document.querySelector('.micro_cotainer_menu');
            if (menu.style.display === 'flex') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'flex';
            }
        });

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification show ' + (type === 'success' ? 'success' : 'error');
            notification.style.display = 'block';

            setTimeout(() => {
                notification.className = 'notification hide';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 500);
            }, 3000);
        }
    </script>

</body>

</html>